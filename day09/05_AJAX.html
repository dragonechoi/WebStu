<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>JS AJAX</title>
        
        <!-- ajax는 웹서버 환경 에서만 동작함. Http로 시작하는 웹주소 에서만 동작 -->
        
        <script>
            function aaa(){
                // GET 방식으로 서버로부터 응답을 요청하기 : Request

                var xhr=new XMLHttpRequest();
                // 서버로 부터 응답 받으면 자동으로 발동하는 콜백함수 등록
                xhr.onreadystatechange=function(){
                    // readyState:4 - 서버 응답이 완료된 상태값.
                    // statue - 서버의 응답코드[200-OK,404-NULL] 
                    if(xhr.readyState==4 && xhr.status==200){
                        var e=document.getElementById('target');
                        e.innerHTML= xhr.responseText;
                    }
                }

                 xhr.open('GET','./aaa.txt',true);  //세번째 파라미터 true :비동기 동작 여부 
               // xhr.open('GET','./04_noAJAX.html',true)
              // xhr.open('GET',"getTest.php?name=SAM&msg=Good",true)
            //   만약 다른 서버와 통신 하고싶다면? 예. OPEN API 데이터 구현 - 영화 진흥 위원회,기상청정보,공공데이터포털 등..
           // xhr.open('GET','http://www.w3schools.com/XML/cd_catalog.xml',true) //cross origin error
                xhr.send();

        
            }

            function bbb(){
                
                var xhr=new XMLHttpRequest();
                xhr.onreadystatechange=function(){
                    if(xhr.readyState==4 && xhr.status==200){
                        document.getElementById('target').innerHTML=xhr.responseText;
                    }
                }

                xhr.open('POST','./postTest.php',true);

                xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
                xhr.send('title=Hello&msg=Nice to meet you');

            }

        </script>
    </head>
    <body>
        
        <p>
            <button onclick="aaa()">GET</button>
            <button onclick="bbb()">POST</button>
        </p>

        <hr>

        <!-- 서버의 응답 결과를 보여주는 영역 요소 -->
        <div id="target"></div>
    </body>
</html>